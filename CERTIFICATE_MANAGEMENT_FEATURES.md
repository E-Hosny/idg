# 📋 ميزات إدارة الشهادات - التحديث الجديد

## 🎯 الميزات الجديدة المضافة:

### 1. **حذف الشهادة المرفوعة**
- زر حذف أحمر 🗑️ لكل شهادة مرفوعة
- حذف الملف الفعلي من التخزين
- تحديث حالة الشهادة إلى "مسودة"
- تحديث حالة القطعة إلى "مُقيمة" إذا لم تكن هناك شهادات أخرى

### 2. **استبدال الشهادة المرفوعة**
- زر استبدال برتقالي 🔄 لكل شهادة مرفوعة
- حذف الشهادة القديمة تلقائياً
- رفع شهادة جديدة بدلاً منها
- تحذير للمستخدم قبل الاستبدال

### 3. **واجهة محسنة**
- عرض 3 أزرار للشهادات المرفوعة:
  - ✅ **عرض** (أخضر) - لعرض الشهادة
  - 🗑️ **حذف** (أحمر) - لحذف الشهادة
  - 🔄 **استبدال** (برتقالي) - لرفع شهادة جديدة

## 🔧 التحديثات التقنية:

### 1. **Routes الجديدة**
```php
Route::delete('/artifacts/{artifact}/delete-certificate', [CertificateController::class, 'deleteCertificate'])
    ->name('artifacts.delete-certificate');
```

### 2. **Method جديد في CertificateController**
```php
public function deleteCertificate(Artifact $artifact)
{
    // حذف الملف الفعلي
    // تحديث حالة الشهادة
    // تحديث حالة القطعة
}
```

### 3. **تحديث uploadCertificate Method**
- دعم استبدال الشهادات الموجودة
- حذف الملف القديم تلقائياً
- رسائل نجاح مختلفة للرفع والاستبدال

### 4. **تحديث الواجهة الأمامية**
- modal محسن مع تحذيرات
- أزرار ديناميكية حسب الحالة
- رسائل تأكيد للحذف والاستبدال

## 📱 كيفية الاستخدام:

### **للشهادات المرفوعة:**
1. **عرض الشهادة**: انقر على زر "✅ Uploaded"
2. **حذف الشهادة**: انقر على زر "🗑️ Delete" ثم أكد الحذف
3. **استبدال الشهادة**: انقر على زر "🔄 Replace" ثم ارفع الشهادة الجديدة

### **للشهادات غير المرفوعة:**
- زر واحد فقط: "📄 Upload Certificate"

## ⚠️ التحذيرات والضمانات:

### **قبل الحذف:**
- رسالة تأكيد: "هل أنت متأكد من حذف هذه الشهادة؟"
- لا يمكن التراجع عن الحذف

### **قبل الاستبدال:**
- تحذير أصفر: "سيتم استبدال الشهادة الموجودة"
- رسالة تأكيد: "هل أنت متأكد من استبدال الشهادة؟"
- حذف تلقائي للشهادة القديمة

## 🎨 الألوان والرموز:

- **أخضر** ✅: عرض الشهادة
- **أحمر** 🗑️: حذف الشهادة  
- **برتقالي** 🔄: استبدال الشهادة
- **أزرق** 📄: رفع شهادة جديدة

## 🔄 تدفق العملية:

### **رفع شهادة جديدة:**
1. انقر على "📄 Upload Certificate"
2. اختر ملف PDF
3. انقر على "Upload"
4. تظهر رسالة نجاح

### **استبدال شهادة موجودة:**
1. انقر على "🔄 Replace"
2. تحذير أصفر يظهر
3. اختر الملف الجديد
4. أكد الاستبدال
5. رسالة نجاح: "تم استبدال الشهادة بنجاح!"

### **حذف شهادة:**
1. انقر على "🗑️ Delete"
2. رسالة تأكيد
3. أكد الحذف
4. رسالة نجاح: "تم حذف الشهادة بنجاح!"

## 📊 الحالات المدعومة:

- ✅ **مرفوعة**: عرض + حذف + استبدال
- ❌ **غير مرفوعة**: رفع فقط
- 🔄 **أثناء الرفع**: رسائل تقدم
- ⚠️ **أثناء الاستبدال**: تحذيرات وتأكيدات

## 🚀 المزايا:

1. **مرونة كاملة** في إدارة الشهادات
2. **واجهة بديهية** مع ألوان واضحة
3. **حماية من الأخطاء** مع رسائل تأكيد
4. **إدارة ذكية** للملفات والحالات
5. **تجربة مستخدم محسنة** مع رسائل واضحة
